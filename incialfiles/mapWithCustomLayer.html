<!DOCTYPE html>
<html lang="en"  ng-app="directivesModule">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
</head>
<body>

<h3>zendynamix Map Directive</h3>
<zd-map map-id="indexmap"  latitude=51.505 longitude=-0.09 zoom=13 tile-layer="osm" ></zd-map>
<zd-map map-id="secondmap"  latitude=12.9542944 longitude=77.4905117 zoom=8 tile-layer="osm" ></zd-map>
<zd-map map-id="secondmawp"  latitude=12.9542944 longitude=77.4905117 zoom=8 tile-layer="osm" ></zd-map>
<zd-map map-id="secondmaw2p"  latitude=12.9542944 longitude=77.4905117 zoom=8 tile-layer="osm" ></zd-map>


<script src="../js/angular.js"></script>
<script>

    (function() {

        var zdMap =  function() {

            var template = '<div id="{{mapId}}"  style="width: 500px;height: 500px "> </div>'
            function link(scope, elem, attrs) {
                elem.ready(function () {
                    initMap(scope.latitude,scope.longitude,scope.zoom,scope.mapId,scope.tileLayer)
                })


            }

            function initMap(latitude,longitude,zoom,mapId,tileLayerName) {

               /* var imageUrl = 'http://www.lib.utexas.edu/maps/historical/newark_nj_1922.jpg',
                        imageBounds = [[40.712216, -74.22655], [40.773941, -74.12544]];

                L.imageOverlay(imageUrl, imageBounds).addTo(mymap);*/


                var mymap = L.map(mapId).setView([latitude,longitude], zoom);
                var mapOptions={
                    titleLayer:{
                        "osm":new L.tileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                            attribution: '&copy; Openstreetmap France | &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                        }),
                        "bing":new L.BingLayer("AuhiCJHlGzhg93IqUH_oCpl_-ZUrIE6SPftlyGYUvr9Amx5nzA-WqGcPquyFZl4L", {type: 'AerialWithLabels'})
                    }
                }
             var tileLayer=   mapOptions.titleLayer[tileLayerName];

                tileLayer.addTo(mymap)
            }
            return {
                scope: {
                    mapId:'@',
                    latitude:'@',
                    longitude:'@',
                    zoom:'@',
                    tileLayer:'@'
                },
                link: link,
                template: template
            };
        };




        angular.module('directivesModule', [])
                .directive('zdMap', zdMap);

    }());



</script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
<script src="../malibs/bingLayer.js"></script>

</body>
</html>